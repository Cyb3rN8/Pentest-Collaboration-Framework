<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Mon Jul 06 2020 16:48:25 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5ec4304df6b1553439386cc1"
      data-wf-site="5ec2ba8457c5c50b20b387c9">
{% include 'header.html' %}
<body>
{% include 'navbar.html' %}
<div class="centered-container w-container">
    <div class="w-row">
        <div class="column-211 w-clearfix w-col w-col-6">
            <div class="text-block-5">Edit profile:</div>
            <div class="w-form">
                <form id="email-form" name="email-form" data-name="Email Form"
                      class="form w-clearfix" action="/profile" method="post">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    <input type="hidden" name="change_profile" value="1"/>
                    <label for="Email" class="field-label">Email:</label>
                    <input
                        type="email" class="w-input" maxlength="256"
                        name="email" data-name="Email"
                        placeholder="drakylar@yandex.ru" id="Email" required="" value="{{ escape(user_data['email'])}}">
                    <label for="firstname" class="field-label-11">First name:</label>
                    <input type="text" class="w-input"
                                        maxlength="256" name="fname"
                                        data-name="firstname" placeholder="Ivan" value="{{ escape(user_data['fname']) }}">
                    <label for="Second-Name" class="field-label-12">Second name:</label>
                    <input type="text" class="w-input"
                                        maxlength="256" name="lname"
                                        data-name="Second Name"
                                        placeholder="Ivanov" id="Second-Name" value="{{ escape(user_data['lname'])}}">
                    <label for="Second-Name-2" class="field-label-12">Company:</label>
                    <input
                        type="text" class="w-input" maxlength="256"
                        name="company" data-name="Company" placeholder="Intel"
                        id="Company" value="{{ escape(user_data['company']) }}">
                    <label for="password" class="field-label-12">Password (for making changes):</label>
                    <input type="password"
                                                        class="w-input"
                                                        maxlength="256"
                                                        name="password"
                                                        data-name="password"
                                                        id="password"
                                                        required="">
                    <input type="submit" value="Submit" data-wait="Please wait..." class="submit-button w-button">
                </form>
                <div class="success-message w-form-done"></div>
                <div class="error-message w-form-fail">
                    <div>Oops! Something went wrong while submitting the form.
                    </div>
                </div>
            </div>
        </div>
        <div class="w-clearfix w-col w-col-6">
            <div class="text-block-5">Change password:</div>
            <div class="w-form">
                <form id="email-form-2" name="email-form-2"
                      data-name="Email Form 2" class="form-3 w-clearfix" action="/profile" method="post">
                    <label for="oldpassword" class="field-label-13">Old
                    password:</label>
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    <input type="hidden" name="change_password" value="1"/>
                    <input type="password" class="w-input"
                                            maxlength="256" name="oldpassword"
                                            data-name="oldpassword"
                                            placeholder=""
                                            id="oldpassword"><label
                        for="newpassword" class="field-label-13">New
                    password:</label>
                    <input type="password" class="w-input"
                                            maxlength="256" name="password1"
                                            data-name="newpassword1"
                                            placeholder="" id="newpassword"
                                            required=""><label
                        for="newpassword-2" class="field-label-13">New password
                    (again):</label><input type="password" class="w-input"
                                           maxlength="256" name="password2"
                                           data-name="newpassword2"
                                           placeholder="" id="newpassword-2"
                                           required=""><input type="submit"
                                                              value="Submit"
                                                              data-wait="Please wait..."
                                                              class="submit-button-5 w-button">
                </form>
                    {% for error in errors %}
                        <div class="w-form-fail" style="display: block">
                            <div>{{error}}</div>
                        </div>
                    {% else %}
                        {% if success_message is defined  and success_message != '' %}
                            <div class="w-form-done" style="display: block">
                                <div>{{success_message}}</div>
                            </div>
                        {% endif %}
                    {% endfor %}
            </div>
        </div>
    </div>
    <div class="text-block-5">Configurations:</div>
    <div class="columns-65 w-row">
      <div class="w-clearfix w-col w-col-6">
        <div class="text-block-5">Variables</div>
        <div class="w-form">
          <script>
                function set_config(name, display_name){

                    var elem = document.getElementById('edit_config_id');

                    if (elem){
                        elem.value = name;
                        elem.innerText = display_name;
                        elem.selected = true;
                    } else {
                        var select = document.getElementById('select_config_type');
                        var opt = document.createElement('option');
                        opt.value = name;
                        opt.innerText = display_name;
                        opt.id = 'edit_config_id';
                        select.appendChild(opt);
                        opt.selected = true;
                    }
                }
            </script>
          <form id="email-form-5" name="email-form-5" data-name="Email Form 5" method="post" action="/profile">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
              <input type="hidden" name="add_config" value="1"/>
            <div class="w-row">
              <div class="column-244 w-col w-col-4">
                  <select id="select_config_type" name="config_name" data-name="Field" class="select-field-14 w-select">
                      <option value="shodan">Shodan API key</option>
                      <option value="zeneye">Zeneye API key</option>
                  </select>
              </div>
              <div class="w-col w-col-4">
                  <input type="text" class="w-input" maxlength="256" name="config_value" data-name="Email 2" placeholder="" id="email-2" required>
              </div>
              <div class="w-clearfix w-col w-col-4">
                  <input type="submit" name="action" value="Add" data-wait="Please wait..." class="submit-button-31 w-button">
              </div>
            </div>
          </form>
          {% if add_tester_errors is defined %}
                    {% for error in add_config_errors %}
                        <div class="w-form-fail" style="display: block">
                            <div>{{error}}</div>
                        </div>
                    {% endfor %}
                {% endif %}
        </div>
        {% set team_configs = db.select_configs(user_id=user_data['id']) %}
        {% for current_config in team_configs %}
        <div class="w-form">
          <form id="email-form-6" name="email-form-6" data-name="Email Form 6" method="post" action="/profile">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
              <input type="hidden" name="config_name" value="{{escape(current_config['name'])}}"/>
              <input type="hidden" name="config_value" value="delete"/>
              <input type="hidden" name="add_config" value="1"/>
            <div class="w-row">
              <div class="w-col w-col-4">
                  <label for="name" class="field-label-34">{{escape(current_config['display_name'])}}:</label>
              </div>
              <div class="w-col w-col-4">
                  <input type="password" class="text-field-30 w-input" maxlength="256" name="email-3" data-name="Email 3" placeholder="**********" id="email-3" readonly>
              </div>
              <div class="w-clearfix w-col w-col-4">
                  <button type="button" onclick="set_config('{{escape(current_config["name"])}}','{{escape(current_config["display_name"])}}');"  class="button-52 w-button">Edit</button>
                  <input type="submit" name="action" value="Delete" data-wait="Please wait..." class="submit-button-32 w-button">
              </div>
            </div>
          </form>
        </div>
        {% endfor %}

      </div>
      <div class="w-clearfix w-col w-col-6">
        <div class="text-block-5">Report templates</div>
        </br></br><h6>.txt/.tex/.docx/.zip (<a target="_blank" rel="noopener noreferrer" href="https://gitlab.com/invuls/pentest-projects/pcf/-/tree/master/documentation/report">examples</a>)</h6>
        <div class="w-form">
          <form id="email-form-7" name="email-form-7" data-name="Email Form 7" enctype="multipart/form-data"  class="form-9" method="post" action="/profile">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
            <input type="hidden" name="add_template" value="1"/>
            <div class="w-row">
              <div class="w-col w-col-6">
                  <input type="text" class="text-field-31 w-input" maxlength="256" name="template_name" data-name="Field 2" placeholder="Report name" id="field-2" required="">
              </div>
              <div class="w-col w-col-3">
                  <input type="file" class="w-input" maxlength="256" name="file" data-name="Field 3" placeholder="File input" id="field-3" required="">
              </div>
              <div class="w-clearfix w-col w-col-3">
                  <input type="submit" value="Submit" data-wait="Please wait..." class="submit-button-33 w-button">
              </div>
            </div>
          </form>
        </div>
        {% set team_templates = db.select_templates(user_id=user_data['id']) %}
        {% for current_template in team_templates %}
        <div class="w-form">
          <form id="email-form-8" name="email-form-8" data-name="Email Form 8" method="post" action="/profile">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
            <input type="hidden" name="delete_template" value="1"/>
            <input type="hidden" name="template_id" value="{{current_template['id']}}"/>
            <div class="w-row">
              <div class="w-col w-col-6">
                  <input type="text" class="text-field-32 w-input" maxlength="256" name="name-2" data-name="Name 2" placeholder="Report name" id="name-2" value="{{escape(current_template['name'])}}" readonly>
              </div>
              <div class="w-clearfix w-col w-col-6">
                  <a href="/static/files/templates/{{current_template['id']}}" class="button-53 w-button">Download</a>
                  <input type="submit" value="Delete" data-wait="Please wait..." class="submit-button-35 w-button">
              </div>
            </div>
          </form>
        </div>
        {% endfor %}
      </div>
    </div>
</div>
{% include 'footer.html' %}
</body>
</html>